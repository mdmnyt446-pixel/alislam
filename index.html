<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق ألسلام المطور - الأستاذة نضيمة</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-gold: #c5a059;
            --gold-gradient: linear-gradient(135deg, #d4af37 0%, #c5a059 50%, #b8860b 100%);
            --green-gradient: linear-gradient(135deg, #1a472a 0%, #2a633d 100%);
            --deep-green: #1a472a;
            --soft-bg: #f4f7f2;
            --white: #ffffff;
            --card-shadow: 0 10px 30px rgba(0,0,0,0.08);
            --btn-shadow: 0 4px 15px rgba(197, 160, 89, 0.4);
        }

        body { margin: 0; padding: 0; background-color: var(--soft-bg); font-family: 'Tajawal', sans-serif; color: #333; user-select: none; overflow-x: hidden; }

        /* --- حاوية الصندوق والصورة --- */
        .host-container {
            position: relative;
            margin-top: 60px; /* مساحة لنصف الصورة العلوي */
            padding: 0 10px;
        }

        .host-image {
            width: 120px;
            height: 120px;
            position: absolute;
            top: -60px; /* ترفع الصورة للأعلى لتتداخل */
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            filter: drop-shadow(0 5px 15px rgba(197, 160, 89, 0.3));
        }

        .host-box {
            background: var(--white);
            padding: 70px 25px 25px; /* حشوة علوية كبيرة لترك مساحة للصورة */
            border-radius: 30px;
            border: 2px solid var(--primary-gold);
            box-shadow: var(--card-shadow);
            text-align: center;
            position: relative;
            line-height: 1.8;
        }

        .host-box h4 {
            color: var(--deep-green);
            margin: 0 0 5px 0;
            font-size: 17px;
            font-weight: 500;
        }

        .host-name {
            display: block;
            font-family: 'Amiri', serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-gold);
            margin-bottom: 10px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.05);
        }

        .dua-text {
            font-size: 15px;
            color: #555;
            line-height: 1.7;
            border-top: 1px solid #f0f0f0;
            padding-top: 15px;
            margin-top: 10px;
        }

        /* --- الزينة والأقسام --- */
        .ramadan-decor { position: absolute; top: 0; width: 100%; height: 150px; pointer-events: none; z-index: 10; overflow: hidden; }
        .lantern { position: absolute; top: -10px; color: var(--primary-gold); font-size: 25px; animation: swing 3s ease-in-out infinite; transform-origin: top center; }
        .lantern.l1 { left: 10%; } .lantern.l2 { right: 10%; animation-delay: 0.5s; }
        @keyframes swing { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }
        
        .moon-star { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); color: var(--primary-gold); font-size: 40px; animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { opacity: 0.5; transform: translateX(-50%) scale(1); } to { opacity: 1; transform: translateX(-50%) scale(1.1); } }

        .app-page { display: none; padding: 20px; padding-bottom: 120px; animation: slideUp 0.5s ease; position: relative; }
        .active-page { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .bottom-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 400px; background: var(--white); display: none; justify-content: space-around; align-items: center; padding: 10px 5px; box-shadow: 0 15px 35px rgba(26, 71, 42, 0.15); border-radius: 25px; z-index: 1000; border: 1px solid rgba(197, 160, 89, 0.2); }
        .nav-item { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 15px; border-radius: 20px; color: #888; transition: 0.4s; cursor: pointer; }
        .nav-item.active { background: var(--green-gradient); color: var(--white); }
        .nav-item.active span { display: inline-block; }
        .nav-item span { display: none; font-size: 13px; font-weight: 700; }

        .profile-header { background: var(--green-gradient); padding: 40px 20px; border-radius: 30px; color: white; text-align: center; }
        .profile-img-box { position: relative; width: 120px; height: 120px; margin: 0 auto 15px; border: 4px solid var(--primary-gold); border-radius: 50%; padding: 4px; background: white; }
        #profile-display { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        
        .avatar-grid { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-top: 15px; }
        .avatar-option { width: 60px; height: 60px; border: 2px solid var(--primary-gold); border-radius: 12px; overflow: hidden; cursor: pointer; }
        .avatar-option img { width: 100%; height: 100%; object-fit: cover; }

        .landing-screen { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(rgba(26, 71, 42, 0.9), rgba(26, 71, 42, 0.9)), url('https://www.transparenttextures.com/patterns/islamic-art.png'); background-size: cover; color: white; text-align: center; }
        #memorial-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); display: flex; justify-content: center; align-items: center; z-index: 9999; transition: 1s; }
        .btn-luxury { background: var(--gold-gradient); color: white; border: none; padding: 12px 40px; border-radius: 50px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: var(--btn-shadow); margin-top: 20px; }
    </style>
</head>
<body>

    <div id="memorial-overlay">
        <div style="background: white; padding: 40px 20px; border-radius: 30px; text-align: center; max-width: 85%; border-top: 5px solid var(--primary-gold);">
            <h3 style="font-family: 'Amiri';">﴿ كُلُّ نَفْسٍ ذَائِقَةُ الْمَوْتِ ﴾</h3>
            <p>وقف على روح المرحوم <b>(سلام عبدلله جاسم)</b><br>وعن جميع موتى المسلمين.</p>
        </div>
    </div>

    <div id="landing" class="landing-screen">
        <h1 style="font-family: 'Amiri', serif; font-size: 42px;">تطبيق ألسلام</h1>
        <button class="btn-luxury" onclick="enterApp()">دخول التطبيق</button>
    </div>

    <div id="home" class="app-page">
        <div class="ramadan-decor">
            <i class="fas fa-kaaba lantern l1"></i>
            <i class="fas fa-fan lantern l2"></i>
            <div class="moon-star"><i class="fas fa-moon"></i></div>
        </div>

        <h2 style="font-family: 'Amiri', serif; color: var(--deep-green); text-align: center; margin-top: 55px; margin-bottom: 25px;">رمضان مبارك</h2>
        
        <div style="background: white; padding: 15px; border-radius: 20px; box-shadow: var(--card-shadow); text-align: center; margin-bottom: 40px; border: 1px solid rgba(197, 160, 89, 0.1);">
            تقبل الله طاعتكم يا <br>
            <span id="user-name-display" style="color: var(--deep-green); font-weight: bold; font-size: 20px;">طالب علم</span>
        </div>

        <div class="host-container">
            <img src="https://f.top4top.io/p_3707qsxv90.png" class="host-image" alt="أيقونة الأستاذة">
            <div class="host-box">
                <h4>سيتم استضافتكم من قبل الأستاذة</h4>
                <span class="host-name">نضيمة مهيدي صالح</span>
                <p class="dua-text">
                    أسأل الله أن يكتب لها ولنا أجراً عظيماً. أسأل الله أن يتقبل منا ومنكم صالح الأعمال، وأن يجعلها في ميزان حسناتنا جميعاً، ويرزقنا وإياكم القبول والمغفرة والثواب العظيم في الدنيا والآخرة.
                </p>
                <i class="fas fa-star" style="position: absolute; bottom: 15px; right: 15px; color: var(--primary-gold); opacity: 0.2;"></i>
                <i class="fas fa-star" style="position: absolute; bottom: 15px; left: 15px; color: var(--primary-gold); opacity: 0.2;"></i>
            </div>
        </div>
    </div>

    <div id="noor" class="app-page"><h2 style="text-align: center; font-family: 'Amiri';">القاعدة النورانية</h2></div>
    <div id="ask" class="app-page"><h2 style="text-align: center; font-family: 'Amiri';">المجيب الآلي</h2></div>

    <div id="profile" class="app-page">
        <div class="profile-header">
            <div class="profile-img-box">
                <img id="profile-display" src="https://f.top4top.io/p_3707qcmf30.jpg">
                <input type="file" id="img-upload" style="display:none" onchange="loadPhoto(event)">
                <label for="img-upload" style="position:absolute; bottom:0; right:0; background:var(--primary-gold); width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; border:2px solid white;"><i class="fas fa-camera" style="color:white; font-size:12px;"></i></label>
            </div>
            <h3 id="display-name-label" style="margin:0;">طالب علم</h3>
        </div>

        <div class="avatar-selection">
            <h4 style="text-align:center; color: var(--deep-green);">اختر رمزك الشخصي</h4>
            <div class="avatar-grid">
                <div class="avatar-option" onclick="setAvatar('https://f.top4top.io/p_3707qcmf30.jpg')"><img src="https://f.top4top.io/p_3707qcmf30.jpg"></div>
                <div class="avatar-option" onclick="setAvatar('https://g.top4top.io/p_3707g8mi91.jpg')"><img src="https://g.top4top.io/p_3707g8mi91.jpg"></div>
                <div class="avatar-option" onclick="setAvatar('https://h.top4top.io/p_3707e1sle2.jpg')"><img src="https://h.top4top.io/p_3707e1sle2.jpg"></div>
                <div class="avatar-option" onclick="setAvatar('https://i.top4top.io/p_37079mwxf3.jpg')"><img src="https://i.top4top.io/p_37079mwxf3.jpg"></div>
            </div>
        </div>
        
        <div style="margin-top:20px; background:white; padding:15px; border-radius:15px; box-shadow: var(--card-shadow);">
            <input type="text" id="edit-name" placeholder="الاسم الكريم" oninput="saveData()" style="width:100%; border:none; outline:none; font-family:'Tajawal'; text-align: center;">
        </div>
    </div>

    <nav class="bottom-nav" id="main-nav">
        <div class="nav-item active" onclick="switchPage('home', this)"><i class="fas fa-moon"></i><span>الرئيسية</span></div>
        <div class="nav-item" onclick="switchPage('noor', this)"><i class="fas fa-book-quran"></i><span>القاعدة</span></div>
        <div class="nav-item" onclick="switchPage('ask', this)"><i class="fas fa-comment-dots"></i><span>اسألني</span></div>
        <div class="nav-item" onclick="switchPage('profile', this)"><i class="fas fa-user-circle"></i><span>حسابي</span></div>
    </nav>

    <script>
        function switchPage(pageId, element) {
            document.querySelectorAll('.app-page').forEach(p => p.classList.remove('active-page'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(pageId).classList.add('active-page');
            element.classList.add('active');
        }

        function enterApp() {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('home').classList.add('active-page');
            document.getElementById('main-nav').style.display = 'flex';
        }

        function setAvatar(url) {
            document.getElementById('profile-display').src = url;
            localStorage.setItem('userPhoto', url);
        }

        function saveData() {
            let name = document.getElementById('edit-name').value;
            localStorage.setItem('userName', name);
            document.getElementById('user-name-display').innerText = name || "طالب علم";
            document.getElementById('display-name-label').innerText = name || "طالب علم";
        }

        function loadPhoto(event) {
            let reader = new FileReader();
            reader.onload = function() {
                document.getElementById('profile-display').src = reader.result;
                localStorage.setItem('userPhoto', reader.result);
            }
            reader.readAsDataURL(event.target.files[0]);
        }

        window.onload = function() {
            if(localStorage.getItem('userName')) {
                let name = localStorage.getItem('userName');
                document.getElementById('edit-name').value = name;
                document.getElementById('user-name-display').innerText = name;
                document.getElementById('display-name-label').innerText = name;
            }
            if(localStorage.getItem('userPhoto')) document.getElementById('profile-display').src = localStorage.getItem('userPhoto');

            setTimeout(() => {
                let overlay = document.getElementById('memorial-overlay');
                overlay.style.opacity = '0';
                setTimeout(() => overlay.style.display = 'none', 1000);
            }, 3000);
        };
    </script>
</body>
</html>
